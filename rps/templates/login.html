{% extends 'bases/base.html' %}
{% block content %}
  {% load static %}

  {% if user.is_authenticated %}
    <script>
      window.location = 'http://' + window.location.host + '/';
    </script>
  {% endif %}

  {% if login_err %}
    <script>
      alert("Invalid credentials. Please try again.");
      window.location = 'http://' + window.location.host + '/login';
    </script>
  {% endif %}

  <h1 class="text-center my-5">Rock Paper Scissors</h1>

  <div class="container my-5">
    <form id="login-form" method="post" action="/login" class="border p-4 rounded shadow-sm mx-auto" style="max-width: 400px; background-color: #f8f9fa;">
      {% csrf_token %}
      
      <div class="mb-3">
        <label for="username" class="form-label">{{ form.username.label }}</label>
        {{ form.username }}
      </div>

      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">{{ form.password.label }}</label>
        {{ form.password }}
      </div>

      <div class="mb-3">
        <input type="checkbox" name="showpass" id="showpass">
        <label for="showpass">Show Password</label>
      </div>
      
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>

    <div class="my-5 text-center">
      <p>Don't have an account?</p>
      <a href="/signup" class="btn btn-secondary">Sign up Instead</a>
    </div>
  </div>

  <script src="{% static 'js/login.js' %}"></script>
{% endblock content %}
